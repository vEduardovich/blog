---
layout: post
title: 2025년 5월 18일 일요일
permalink: /2025/05/18/
---
**수면** : 아침 6시 30분 ~ 11시 10분 : 어제 충분히 잤음에도 갑작스럽게 낮잠이 밀려와 자고 일어났다. 그러다보니 아침에 자게 되었다.<br/>
* #### 개발<br/>
소셜 로그인의 경우 프로필 이미지가 res에만 저장되고 있었다. raw로 바꾸자<br/>
s3 upload모듈로 모두 통일, 외부 함수로 공용화<br/>
미들웨어 토큰 시스템 재정비 → 완료. 생각보다 많은 시간이 들어갔다.<br/>
다시보니 코드가 엉망이다. 돌아가기는 하는데 얽히고 설켜있다. 재정비가 필요하다.<br/>
기존 토큰을 단순화한다. one_night은 email과 uniqueAddr, love는 email만 넣는다. : 닉네임만 바꿔도 쿠키를 새로 굽는데 쓸데없는 짓이다.<br/>
그리고 firstAccess할때 쿠키 열고 항상 db에 붙어 필수 정보 가져오는것로 바꾼다.<br/>
다만 middleware만 쿠키로 처리한다<br/>
<br/>
클라 코드에 아바타 유무를 체크하는 모든 로직을 hasAvatar체크로 변경<br/>
내정보, Nav<br/>
<br/>
스냇샷 저장 후 탈퇴유저 정보처리<br/>
글저장시 처리<br/>
글 목록에서 보여줄때 처리<br/>
스키마에 unique 작업 대대적으로 추가하기 → 하지 x<br/>
index는 forum과 comment, user 중심으로 재편하기<br/>
<br/>
글수정 페이지 제작